<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Gemini App</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        import React, { useState, useEffect, useMemo } from 'react';

import { initializeApp } from 'firebase/app';

import { getAuth, signInWithCustomToken, signInAnonymously, onAuthStateChanged } from 'firebase/auth';

import { getFirestore, doc, setDoc, onSnapshot, collection, query, updateDoc, increment } from 'firebase/firestore';

import { Search, UserCheck, BarChart3, CheckCircle, Utensils, ExternalLink, Percent, Users, Calendar, Cloud, Info } from 'lucide-react';



// Konfigurasi Firebase

const firebaseConfig = {
  const firebaseConfig = {
  apiKey: "AIzaSyBqP2wFKLKUycJg4w8fS5bjxFMlwR8HfRk",
  authDomain: "rmt-digital.firebaseapp.com",
  projectId: "rmt-digital",
  storageBucket: "rmt-digital.firebasestorage.app",
  messagingSenderId: "372377735946",
  appId: "1:372377735946:web:469f342850f37fff5aa0f3"
};


const App = () => {

  const [user, setUser] = useState(null);

  const [activeTab, setActiveTab] = useState('kehadiran');

  const [activeClass, setActiveClass] = useState('PPKI');

  const [searchTerm, setSearchTerm] = useState('');

  const [presentToday, setPresentToday] = useState([]);

  const [monthlyRecords, setMonthlyRecords] = useState({});

  const [isLoading, setIsLoading] = useState(true);



  // Data Murid - 219 Orang (Berdasarkan CSV)

  const students = useMemo(() => [

    { id: 1, name: "KHADEEJA AFEEYA BINTI ISMAIL", class: "PPKI" },

    { id: 2, name: "MUHAMMAD AMMAR FARISH BIN MOHD EMRY", class: "PPKI" },

    { id: 3, name: "WAN SHAFIY BENJAMIN BIN WAN MOHD HAFIZULLAH", class: "PPKI" },

    { id: 4, name: "AHMAD ZIYAD AMZAR BIN ZAMRI", class: "PPKI" },

    { id: 5, name: "CHE NOR ASHIF BIN CHE MAT SOKRI", class: "PPKI" },

    { id: 6, name: "ISKANDAR ZAMAKHSHARY BIN ISKANDAR ZULKARNAIN", class: "PPKI" },

    { id: 7, name: "MUHAMMAD ADAM TAUFIQILLAH BIN MOHD FAIZAL", class: "PPKI" },

    { id: 8, name: "MUHAMMAD AQEEL NAUFAL BIN MOHD AZELAN", class: "PPKI" },

    { id: 9, name: "MUHAMMAD FIRAS DANISH BIN ABDUL HALIM", class: "PPKI" },

    { id: 10, name: "MUHAMMAD IFFAT NAFIS BIN MOHD IKHWAN NAIM", class: "PPKI" },

    { id: 11, name: "NUR ADZRAA QAIREENA BINTI AHMAD ZAKRI", class: "PPKI" },

    { id: 12, name: "UFAIRA NUR AFIFA BINTI MOHD HAFIZAN", class: "PPKI" },

    { id: 13, name: "ARWA BINTI ABDUL WAHAB", class: "PPKI" },

    { id: 14, name: "MUHAMAD RAZIQ BIN SOBRI SALAEH", class: "PPKI" },

    { id: 15, name: "MUHAMMAD AQIL ZIQRI BIN JUNAIDI", class: "PPKI" },

    { id: 16, name: "NUR ASMA IMANI BINTI ABDULLAH", class: "PPKI" },

    { id: 17, name: "NUR HAZIRAHUDA BINTI GHAZALI", class: "PPKI" },

    { id: 18, name: "NUR IMAN BINTI AHMAD ZAMURI", class: "PPKI" },

    { id: 19, name: "ADNIN AMIRAH IRDINA BINTI ZAMRI", class: "PPKI" },

    { id: 20, name: "CHE NUR ARISSA ZAHRA BINTI CHE MAT SOKRI", class: "PPKI" },

    { id: 21, name: "MUHAMMAD ADAM BIN ABDUL JALIL", class: "PPKI" },

    { id: 22, name: "MUHAMMAD AIMAN BIN ABDUL JALIL", class: "PPKI" },

    { id: 23, name: "MUHAMMAD HADIF BIN MAHADZIR", class: "PPKI" },

    { id: 24, name: "NUR FAIHA BINTI ABDULLAH", class: "PPKI" },

    { id: 25, name: "NUR SYAZA ADRIANA BINTI SHAHIRAN", class: "PPKI" },

    { id: 26, name: "AHMAD SYAQIL HAIDAR BIN AHMAD SYAHRIN", class: "1 AFQ" },

    { id: 27, name: "AHMAD SYARIF BIN ASWADI", class: "1 AFQ" },

    { id: 28, name: "AUNI ADLINA BINTI MOHAMMAD ROSIDI", class: "1 AFQ" },

    { id: 29, name: "AUNI BATRISYIA BINTI MOHD ZAKI", class: "1 AFQ" },

    { id: 30, name: "FATIMAH AZ ZAHRA BINTI HASBULLAH", class: "1 AFQ" },

    { id: 31, name: "HAIFFA HANA BINTI MOHD HANIF", class: "1 AFQ" },

    { id: 32, name: "MEDINA BINTI MUHAMMAD NUR ARIF", class: "1 AFQ" },

    { id: 33, name: "MUHAMMAD AFIF HARIZ BIN MOHD AMRAN", class: "1 AFQ" },

    { id: 34, name: "MUHAMMAD AIMAN NAJMI BIN ABDULLAH", class: "1 AFQ" },

    { id: 35, name: "MUHAMMAD AMMAR AZFAR BIN AZIZUL", class: "1 AFQ" },

    { id: 36, name: "MUHAMMAD ARYAN AFDAH BIN HARD ARIF AFDAH", class: "1 AFQ" },

    { id: 37, name: "MUHAMMAD NA'IL DANISH BIN ROSLAN", class: "1 AFQ" },

    { id: 38, name: "NUR FATIHAH BINTI MOHAMMAD ADHA", class: "1 AFQ" },

    { id: 39, name: "NUR HAURA HUMAIRA BINTI ZAINUDIN", class: "1 AFQ" },

    { id: 40, name: "SITI NURJANNAH BINTI SHAFIAI", class: "1 AFQ" },

    { id: 41, name: "WAN MUHAMMAD SYARIFUDDIN BIN WAN MOHD SAUFI", class: "1 AFQ" },

    { id: 42, name: "ZARA ZULAIKHA BINTI MUHAMMAD FARIS", class: "1 AFQ" },

    { id: 43, name: "MOHAMAD ARYAN RIFQI BIN MOHAMAD ROZI", class: "1 AFQ" },

    { id: 44, name: "AHLAMI KHAIRA BINTI MOHD KHAIRI", class: "1 AFQ" },

    { id: 45, name: "AHMAD KHUZAIRI BIN MAHADZIR", class: "1 AFT" },

    { id: 46, name: "AMNI SYIFA' BINTI MUHAMMAD NUR ARIF", class: "1 AFT" },

    { id: 47, name: "MUHAMMAD ARYAN ADHA BIN MAHADI", class: "1 AFT" },

    { id: 48, name: "MUHAMMAD HAIDAR BIN MAHADZIR", class: "1 AFT" },

    { id: 49, name: "MUHAMMAD HARITH BIN HARD ARIF AFDAH", class: "1 AFT" },

    { id: 50, name: "MUHAMMAD HARITH BIN MOHD SHAMSOL", class: "1 AFT" },

    { id: 51, name: "MUHAMMAD HAZIQ HAIKAL BIN CHE MAT SOKRI", class: "1 AFT" },

    { id: 52, name: "NUR AMNA IRDINA BINTI MOHAMAD SHUKUR", class: "1 AFT" },

    { id: 53, name: "NUR AZRA QAISARA BINTI ABDUL HALIM", class: "1 AFT" },

    { id: 54, name: "NUR DHIYA QAISARA BINTI MOHD KHAIDZIR", class: "1 AFT" },

    { id: 55, name: "SITI KHADIJAH BINTI ABDULLAH", class: "1 AFT" },

    { id: 56, name: "WAN NUR QAISARA AMANI BINTI WAN MOHD SHAHRIL", class: "1 AFT" },

    { id: 57, name: "WAN NUR QAISARA BALQIS BINTI WAN ABDUL MANAN", class: "1 AFT" },

    { id: 58, name: "AHMAD ZIYAD FARISH BIN AHMAD FADLY", class: "1 ANR" },

    { id: 59, name: "FATIN FARHANAH BINTI ABDULLAH", class: "1 ANR" },

    { id: 60, name: "MUHAMMAD DANIAL IRFAN BIN ROSLEE", class: "1 ANR" },

    { id: 61, name: "MUHAMMAD SYAQIL ZAFRAN BIN AHMAD SYAHRIN", class: "1 ANR" },

    { id: 62, name: "NUR ALEEYA ADRIANA BINTI SHAHIRAN", class: "1 ANR" },

    { id: 63, name: "NUR FATIN SAFIYYA BINTI MOHAMAD SAFUAN", class: "1 ANR" },

    { id: 64, name: "NUR HUMAIRA SOFEA BINTI MOHAMMAD FAKHRULRAZI", class: "1 ANR" },

    { id: 65, name: "NUR RAUDAH BINTI ASWADI", class: "1 ANR" },

    { id: 66, name: "SITI NUR SAFIYAH BINTI MOHAMAD SHUKRI", class: "1 ANR" },

    { id: 67, name: "ZARA NUR AWATIF BINTI MOHAMAD IZWAN", class: "1 ANR" },

    { id: 68, name: "AHMAD AMMAR DANISH BIN AHMAD FADLY", class: "3 AFQ" },

    { id: 69, name: "MUHAMMAD AMMAR DARWISY BIN MOHAMMAD FARED", class: "3 AFQ" },

    { id: 70, name: "MUHAMMAD ASHRAFF DARWISY BIN MOHD ASYRAF", class: "3 AFQ" },

    { id: 71, name: "MUHAMMAD AZAM FAIDZ BIN MOHAMMAD RIDZWAN", class: "3 AFQ" },

    { id: 72, name: "MUHAMMAD FAIQ RAYYAN BIN MOHD FAIZAL", class: "3 AFQ" },

    { id: 73, name: "MUHAMMAD FIKRI BIN MOHAMAD SHUKRI", class: "3 AFQ" },

    { id: 74, name: "NUR AMNA QALISYA BINTI MOHAMAD SHUKUR", class: "3 AFQ" },

    { id: 75, name: "NUR ASIAH BINTI MOHAMAD KHAIDZIR", class: "3 AFQ" },

    { id: 76, name: "SITI NUR ADIRA BINTI SHAFIAI", class: "3 AFQ" },

    { id: 77, name: "UWAIS ALQARNI BIN ROSLEE", class: "3 AFQ" },

    { id: 78, name: "ALISSA HUMAIRA BINTI ASWADI", class: "3 AFT" },

    { id: 79, name: "MARISA NUR AMNI BINTI MAHD ZAKI", class: "3 AFT" },

    { id: 80, name: "MUHAMMAD AMMAR BIN ASWADI", class: "3 AFT" },

    { id: 81, name: "MUHAMMAD AZAM FAHMI BIN AZIZUL", class: "3 AFT" },

    { id: 82, name: "NUR AMANI ADLINA BINTI MOHAMMAD ADHA", class: "3 AFT" },

    { id: 83, name: "NUR ARISSA AMANI BINTI MOHD HANIF", class: "3 AFT" },

    { id: 84, name: "NUR QASEH BINTI ABDULLAH", class: "3 AFT" },

    { id: 85, name: "PUTRI ANIS SYUHADA BINTI ASWADI", class: "3 AFT" },

    { id: 86, name: "SITI NUR ALYA BINTI ABDULLAH", class: "3 AFT" },

    { id: 87, name: "SITI NUR SOFEA BINTI MOHAMAD SHUKRI", class: "3 AFT" },

    { id: 88, name: "AHMAD DANIAL AZIM BIN AHMAD SYAHRIN", class: "3 ANR" },

    { id: 89, name: "AHMAD WAFIY BIN ASWADI", class: "3 ANR" },

    { id: 90, name: "MUHAMMAD ARYAN AFIF BIN HARD ARIF AFDAH", class: "3 ANR" },

    { id: 91, name: "MUHAMMAD DANISH IRFAN BIN ROSLEE", class: "3 ANR" },

    { id: 92, name: "NUR ALEEYA BALQIS BINTI ZAINUDIN", class: "3 ANR" },

    { id: 93, name: "NUR ALEEYA QAISARA BINTI ZAINUDIN", class: "3 ANR" },

    { id: 94, name: "NUR ALYA ADRIANA BINTI SHAHIRAN", class: "3 ANR" },

    { id: 95, name: "NUR FARAH NABILA BINTI MOHAMAD SAFUAN", class: "3 ANR" },

    { id: 96, name: "NUR HUMAIRA BINTI MOHAMMAD FAKHRULRAZI", class: "3 ANR" },

    { id: 97, name: "NUR RAUDHAH BINTI ASWADI", class: "3 ANR" },

    { id: 98, name: "WAN MUHAMMAD SYARIFUDDIN BIN WAN ABDUL MANAN", class: "3 ANR" },

    { id: 99, name: "AHMAD SYAQIL HAIDAR BIN AHMAD SYAHRIN", class: "3 ARR" },

    { id: 100, name: "MUHAMMAD ARYAN AFDAH BIN HARD ARIF AFDAH", class: "3 ARR" },

    { id: 101, name: "AHMAD ZIYAD AMZAR BIN ZAMRI", class: "3 ARR" },

    { id: 102, name: "AHMAD ZIYAD FARISH BIN AHMAD FADLY", class: "3 ARR" },

    { id: 103, name: "AHLAMI KHAIRA BINTI MOHD KHAIRI", class: "3 ARR" },

    { id: 104, name: "AHMAD KHUZAIRI BIN MAHADZIR", class: "3 ARR" },

    { id: 105, name: "AMNI SYIFA' BINTI MUHAMMAD NUR ARIF", class: "3 ARR" },

    { id: 106, name: "MUHAMMAD ARYAN ADHA BIN MAHADI", class: "3 ARR" },

    { id: 107, name: "MUHAMMAD HAIDAR BIN MAHADZIR", class: "3 ARR" },

    { id: 108, name: "MUHAMMAD HARITH BIN HARD ARIF AFDAH", class: "3 ARR" },

    { id: 109, name: "MUHAMMAD HARITH BIN MOHD SHAMSOL", class: "3 ARR" },

    { id: 110, name: "MUHAMMAD HAZIQ HAIKAL BIN CHE MAT SOKRI", class: "3 ARR" },

    { id: 111, name: "NUR AMNA IRDINA BINTI MOHAMAD SHUKUR", class: "3 ARR" },

    { id: 112, name: "NUR AZRA QAISARA BINTI ABDUL HALIM", class: "3 ARR" },

    { id: 113, name: "NUR DHIYA QAISARA BINTI MOHD KHAIDZIR", class: "3 ARR" },

    { id: 114, name: "SITI KHADIJAH BINTI ABDULLAH", class: "3 ARR" },

    { id: 115, name: "WAN NUR QAISARA AMANI BINTI WAN MOHD SHAHRIL", class: "3 ARR" },

    { id: 116, name: "WAN NUR QAISARA BALQIS BINTI WAN ABDUL MANAN", class: "3 ARR" },

    { id: 117, name: "FATIN FARHANAH BINTI ABDULLAH", class: "3 ARR" },

    { id: 118, name: "MUHAMMAD DANIAL IRFAN BIN ROSLEE", class: "3 ARR" },

    { id: 119, name: "MUHAMMAD SYAQIL ZAFRAN BIN AHMAD SYAHRIN", class: "3 ARR" },

    { id: 120, name: "NUR ALEEYA ADRIANA BINTI SHAHIRAN", class: "3 ARR" },

    { id: 121, name: "NUR FATIN SAFIYYA BINTI MOHAMAD SAFUAN", class: "3 ARR" },

    { id: 122, name: "NUR HUMAIRA SOFEA BINTI MOHAMMAD FAKHRULRAZI", class: "3 ARR" },

    { id: 123, name: "NUR RAUDAH BINTI ASWADI", class: "3 ARR" },

    { id: 124, name: "SITI NUR SAFIYAH BINTI MOHAMAD SHUKRI", class: "3 ARR" },

    { id: 125, name: "ZARA NUR AWATIF BINTI MOHAMAD IZWAN", class: "3 ARR" },

    { id: 126, name: "MUHAMMAD ARYAN AFDAH BIN HARD ARIF AFDAH", class: "2 AFQ" },

    { id: 127, name: "MUHAMMAD AQIL BIN MOHD FAIZOL", class: "2 AFQ" },

    { id: 128, name: "MUHAMMAD FAKHRUL HAKIMI BIN MUHAMAD FAIZAL", class: "2 AFQ" },

    { id: 129, name: "MUHAMMAD AARIZ ZAKIR BIN FAIZOL", class: "2 AFT" },

    { id: 130, name: "AQEEL ARSYAD BIN ABD RAHMAN", class: "2 ANR" },

    { id: 131, name: "CHE WAN NUR NAIRA FATIHAH BINTI CHE WAN SUFLI RATMAN", class: "2 ANR" },

    { id: 132, name: "DAMIANA SOFIA BINTI ZAKARIA", class: "2 ANR" },

    { id: 133, name: "DHIA KHADEEJA BINTI HANAFFI", class: "2 ANR" },

    { id: 134, name: "LUTH QAMAR BIN AHMAD KHAIRUL", class: "2 ANR" },

    { id: 135, name: "MUHAMMAD AIDIL SYAWALUDIN BIN CHE", class: "2 ANR" },

    { id: 136, name: "MUHAMMAD AIRELL TESA BIN MOHD IZWAN", class: "2 ANR" },

    { id: 137, name: "MUHAMMAD AQIL ANAQI BIN ABDUL JABAR", class: "2 ANR" },

    { id: 138, name: "MUHAMMAD DANISH HAFIZI BIN MOHD IDZUAN", class: "2 ANR" },

    { id: 139, name: "MUHAMMAD FAHIM NASRUDDIN BIN MUHAMAD FAIS", class: "2 ANR" },

    { id: 140, name: "MUHAMMAD HAKIM BIN ABDUL HADI", class: "2 ANR" },

    { id: 141, name: "MUHAMMAD HARIS BIN MOHD NURHADI @ MUHAMMAD NAQIB", class: "2 ANR" },

    { id: 142, name: "NUR AIRIS NAFEESA BINTI MOHD YASSIN", class: "2 ANR" },

    { id: 143, name: "NUR FATIHAH NABILA BINTI MUHAMAD FAIS", class: "2 ANR" },

    { id: 144, name: "NUR QAISARA IMANI BINTI AMIRYUSOF SHUKRI", class: "2 ANR" },

    { id: 145, name: "AHMAD ZUFIQA BIN MOHD ARIF AFDAH", class: "2 ANR" },

    { id: 146, name: "AHMAD AMMAR DARWISY BIN MOHAMMAD FARED", class: "4 AFQ" },

    { id: 147, name: "MUHAMMAD AZAM FAIDZ BIN MOHAMMAD RIDZWAN", class: "4 AFQ" },

    { id: 148, name: "MUHAMMAD FAIQ RAYYAN BIN MOHD FAIZAL", class: "4 AFQ" },

    { id: 149, name: "MUHAMMAD FIKRI BIN MOHAMAD SHUKRI", class: "4 AFQ" },

    { id: 150, name: "NUR AMNA QALISYA BINTI MOHAMAD SHUKUR", class: "4 AFQ" },

    { id: 151, name: "NUR ASIAH BINTI MOHAMAD KHAIDZIR", class: "4 AFQ" },

    { id: 152, name: "SITI NUR ADIRA BINTI SHAFIAI", class: "4 AFQ" },

    { id: 153, name: "UWAIS ALQARNI BIN ROSLEE", class: "4 AFQ" },

    { id: 154, name: "ALISSA HUMAIRA BINTI ASWADI", class: "4 AFT" },

    { id: 155, name: "MARISA NUR AMNI BINTI MAHD ZAKI", class: "4 AFT" },

    { id: 156, name: "MUHAMMAD AMMAR BIN ASWADI", class: "4 AFT" },

    { id: 157, name: "MUHAMMAD AZAM FAHMI BIN AZIZUL", class: "4 AFT" },

    { id: 158, name: "NUR AMANI ADLINA BINTI MOHAMMAD ADHA", class: "4 AFT" },

    { id: 159, name: "NUR ARISSA AMANI BINTI MOHD HANIF", class: "4 AFT" },

    { id: 160, name: "NUR QASEH BINTI ABDULLAH", class: "4 AFT" },

    { id: 161, name: "PUTRI ANIS SYUHADA BINTI ASWADI", class: "4 AFT" },

    { id: 162, name: "SITI NUR ALYA BINTI ABDULLAH", class: "4 AFT" },

    { id: 163, name: "SITI NUR SOFEA BINTI MOHAMAD SHUKRI", class: "4 AFT" },

    { id: 164, name: "AHMAD DANIAL AZIM BIN AHMAD SYAHRIN", class: "4 ANR" },

    { id: 165, name: "AHMAD WAFIY BIN ASWADI", class: "4 ANR" },

    { id: 166, name: "MUHAMMAD ARYAN AFIF BIN HARD ARIF AFDAH", class: "4 ANR" },

    { id: 167, name: "MUHAMMAD DANISH IRFAN BIN ROSLEE", class: "4 ANR" },

    { id: 168, name: "NUR ALEEYA BALQIS BINTI ZAINUDIN", class: "4 ANR" },

    { id: 169, name: "NUR ALEEYA QAISARA BINTI ZAINUDIN", class: "4 ANR" },

    { id: 170, name: "NUR ALYA ADRIANA BINTI SHAHIRAN", class: "4 ANR" },

    { id: 171, name: "NUR FARAH NABILA BINTI MOHAMAD SAFUAN", class: "4 ANR" },

    { id: 172, name: "NUR HUMAIRA BINTI MOHAMMAD FAKHRULRAZI", class: "4 ANR" },

    { id: 173, name: "NUR RAUDHAH BINTI ASWADI", class: "4 ANR" },

    { id: 174, name: "WAN MUHAMMAD SYARIFUDDIN BIN WAN ABDUL MANAN", class: "4 ANR" },

    { id: 175, name: "MUHAMMAD ARYAN AFDAH BIN HARD ARIF AFDAH", class: "4 ARR" },

    { id: 176, name: "AHMAD AMMAR DARWISY BIN MOHAMMAD FARED", class: "5 AFQ" },

    { id: 177, name: "MUHAMMAD AZAM FAIDZ BIN MOHAMMAD RIDZWAN", class: "5 AFQ" },

    { id: 178, name: "MUHAMMAD FAIQ RAYYAN BIN MOHD FAIZAL", class: "5 AFQ" },

    { id: 179, name: "MUHAMMAD FIKRI BIN MOHAMAD SHUKRI", class: "5 AFQ" },

    { id: 180, name: "NUR AMNA QALISYA BINTI MOHAMAD SHUKUR", class: "5 AFQ" },

    { id: 181, name: "NUR ASIAH BINTI MOHAMAD KHAIDZIR", class: "5 AFQ" },

    { id: 182, name: "SITI NUR ADIRA BINTI SHAFIAI", class: "5 AFQ" },

    { id: 183, name: "UWAIS ALQARNI BIN ROSLEE", class: "5 AFQ" },

    { id: 184, name: "ALISSA HUMAIRA BINTI ASWADI", class: "5 AFT" },

    { id: 185, name: "MARISA NUR AMNI BINTI MAHD ZAKI", class: "5 AFT" },

    { id: 186, name: "MUHAMMAD AMMAR BIN ASWADI", class: "5 AFT" },

    { id: 187, name: "MUHAMMAD AZAM FAHMI BIN AZIZUL", class: "5 AFT" },

    { id: 188, name: "NUR AMANI ADLINA BINTI MOHAMMAD ADHA", class: "5 AFT" },

    { id: 189, name: "NUR ARISSA AMANI BINTI MOHD HANIF", class: "5 AFT" },

    { id: 190, name: "NUR QASEH BINTI ABDULLAH", class: "5 AFT" },

    { id: 191, name: "PUTRI ANIS SYUHADA BINTI ASWADI", class: "5 AFT" },

    { id: 192, name: "SITI NUR ALYA BINTI ABDULLAH", class: "5 AFT" },

    { id: 193, name: "SITI NUR SOFEA BINTI MOHAMAD SHUKRI", class: "5 AFT" },

    { id: 194, name: "AHMAD DANIAL AZIM BIN AHMAD SYAHRIN", class: "5 ANR" },

    { id: 195, name: "AHMAD WAFIY BIN ASWADI", class: "5 ANR" },

    { id: 196, name: "MUHAMMAD ARYAN AFIF BIN HARD ARIF AFDAH", class: "5 ANR" },

    { id: 197, name: "MUHAMMAD DANISH IRFAN BIN ROSLEE", class: "5 ANR" },

    { id: 198, name: "NUR ALEEYA BALQIS BINTI ZAINUDIN", class: "5 ANR" },

    { id: 199, name: "NUR ALEEYA QAISARA BINTI ZAINUDIN", class: "5 ANR" },

    { id: 200, name: "NUR ALYA ADRIANA BINTI SHAHIRAN", class: "5 ANR" },

    { id: 201, name: "NUR FARAH NABILA BINTI MOHAMAD SAFUAN", class: "5 ANR" },

    { id: 202, name: "NUR HUMAIRA BINTI MOHAMMAD FAKHRULRAZI", class: "5 ANR" },

    { id: 203, name: "NUR RAUDHAH BINTI ASWADI", class: "5 ANR" },

    { id: 204, name: "WAN MUHAMMAD SYARIFUDDIN BIN WAN ABDUL MANAN", class: "5 ANR" },

    { id: 205, name: "MUHAMMAD ARYAN AFDAH BIN HARD ARIF AFDAH", class: "5 ARR" },

    { id: 206, name: "NUR AMNI QALESYA BINTI MOHAMAD FIRDAUS", class: "6 AFQ" },

    { id: 207, name: "NUR ATHIRAH BINTI AMIRUL SHAH", class: "6 AFT" },

    { id: 208, name: "NUR QAISARA DAMIA BINTI AMIRYUSOF SHUKRI", class: "6 ANR" },

    { id: 209, name: "WAN NUR ALEESA BINTI WAN HARD SHAHRIL", class: "6 ARR" },

    { id: 210, name: "NURUL ATIQAH BINTI BAKRI", class: "PPKI" },

    { id: 211, name: "MUHAMMAD SYAQIL ZAFRAN BIN AHMAD SYAHRIN", class: "1 ARR" },

    { id: 212, name: "AHMAD SYARIF BIN ASWADI", class: "2 ARR" },

    { id: 213, name: "MUHAMMAD HARITH BIN HARD ARIF AFDAH", class: "2 ARR" },

    { id: 214, name: "AHMAD SYARIF BIN ASWADI", class: "4 ARR" },

    { id: 215, name: "MUHAMMAD HARITH BIN HARD ARIF AFDAH", class: "4 ARR" },

    { id: 216, name: "AHMAD SYARIF BIN ASWADI", class: "6 AFQ" },

    { id: 217, name: "MUHAMMAD HARITH BIN HARD ARIF AFDAH", class: "6 AFT" },

    { id: 218, name: "AHMAD SYARIF BIN ASWADI", class: "6 ANR" },

    { id: 219, name: "MUHAMMAD HARITH BIN HARD ARIF AFDAH", class: "6 ARR" }

  ], []);



  // Inisialisasi Auth

  useEffect(() => {

    const init = async () => {

      try {

        if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {

          await signInWithCustomToken(auth, __initial_auth_token);

        } else {

          await signInAnonymously(auth);

        }

      } catch (err) { console.error("Auth error:", err); }

    };

    init();

    const unsubscribe = onAuthStateChanged(auth, setUser);

    return () => unsubscribe();

  }, []);



  // Sync dengan Firestore

  useEffect(() => {

    if (!user) return;

    const todayDate = new Date().toISOString().split('T')[0];

    const todayDoc = doc(db, 'artifacts', appId, 'public', 'data', 'daily_attendance', todayDate);

    const summaryDoc = doc(db, 'artifacts', appId, 'public', 'data', 'monthly_summary', '2026_01'); 



    const unsubToday = onSnapshot(todayDoc, (snap) => {

      setPresentToday(snap.exists() ? snap.data().students || [] : []);

      setIsLoading(false);

    }, (err) => console.error(err));



    const unsubSummary = onSnapshot(summaryDoc, (snap) => {

      if (snap.exists()) setMonthlyRecords(snap.data().records || {});

    }, (err) => console.error(err));



    return () => { unsubToday(); unsubSummary(); };

  }, [user]);



  // Senarai Kelas yang disusun

  const classes = useMemo(() => {

    const unique = [...new Set(students.map(s => s.class))];

    const order = ['PPKI', '1', '2', '3', '4', '5', '6'];

    return unique.sort((a, b) => {

      const aLevel = order.findIndex(o => a.startsWith(o));

      const bLevel = order.findIndex(o => b.startsWith(o));

      if (aLevel !== bLevel) return aLevel - bLevel;

      return a.localeCompare(b);

    });

  }, [students]);



  const daysInMonth = useMemo(() => new Date(2026, 1, 0).getDate(), []);



  const handleAttendance = async (studentId) => {

    if (!user || presentToday.includes(studentId)) return;

    const todayDate = new Date().toISOString().split('T')[0]
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
